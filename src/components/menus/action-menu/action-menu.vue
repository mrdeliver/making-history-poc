<template>
    <div class="menu">
      <button class="sources-button"
      v-on:click="expandImageRessources=!expandImageRessources; expandTextRessources = false">
        Bildquellen</button>
      <button class="sources-button"
      v-on:click="expandTextRessources=!expandTextRessources; expandImageRessources = false">
        Textquellen</button>
      <button class="sources-button">Audioquellen</button>
      <button class="teacher-button">Lehrerband</button>
      <button class="worksheet-button">Arbeitsbl√§tter</button>
    </div>
    <div v-if="expandImageRessources">
      <router-link v-for="ir in imageRessources" :key="ir.id"
      :to="route.fullPath + '/source/' + ir.id">
      {{ir.content[0].heading}} |
      </router-link>
    </div>
    <div v-if="expandTextRessources">
      <router-link v-for="ir in textRessources" :key="ir.id"
      :to="route.fullPath + '/source/' + ir.id">
      {{ir.content[0].heading}}  |
      </router-link>
    </div>
</template>

<script lang="ts">
import { ImageRessource } from '@/store/data/ressources/image-ressources';
import { Vue, Options } from 'vue-class-component';
import { Prop, Watch } from 'vue-property-decorator';
import { RouteLocationNormalizedLoaded, useRoute } from 'vue-router';
import { TextRessource } from '../../../store/data/ressources/text-ressources';
import { Ressources } from '../../../store/data/data-types';
import RessourceStore from '../../../store/ressource-module';

@Options({
  name: 'ActionMenu',
})
export default class ActionMenu extends Vue {
  @Prop()
  private ressourceIds: Ressources = {} as Ressources;

  private imageRessources: ImageRessource[] = [];

  private textRessources: TextRessource[] = [];

  private expandImageRessources = false;

  private expandTextRessources = false;

  private route: RouteLocationNormalizedLoaded = useRoute();

  @Watch('ressourceIds')
  onRessourceIdsChanges(): void {
    this.imageRessources = RessourceStore.imageRessourcesWithIds(this.ressourceIds.imageSources);
    this.textRessources = RessourceStore.textRessourcesWithIds(this.ressourceIds.textSources);
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped lang="scss">
@import "src/colors";
@import "src/text";
.menu {
  min-width: 500px;
}

button{
  border-color: transparent;
  border-radius: 15px;
  margin: 5px;
  box-shadow: (1px 1px 2px rgba(0, 0, 0, 0.1));
  width: calc(400px/3);
  height: 30px;
  @include regular-text()
}

.sources-button{
  background-color: $color_yellow_2
}

.worksheet-button{
  background-color: $color_blue_2
}

.teacher-button{
  background-color: $color_red_2
}
</style>
